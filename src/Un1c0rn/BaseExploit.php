<?php
namespace Un1c0rn;
class BaseExploit {
	var $ip = null;
        var $port = null;
	var $outputs = '\\Un1c0rn\\Workers\\Output\\Stdout';
	public function __construct(Array $properties=array()){
		foreach($properties as $key => $value){
			$this->{$key} = $value;
      		}
	}

	public function exploit() {
		if(is_null($this->ip)) throw new \Exception('No IP set');
		if(is_null($this->port)) throw new \Exception('No port set');
		if(is_null($this->outputs)) throw new \Exception('No output set');
		return $this->output(
			$this->getExploitData()
		);
	}

	public function output($data) {
		if(!is_array($this->outputs)) return call_user_func(array($this->outputs,'output'),$this,$data);
		foreach($this->$outputs as $output) {
			call_user_func(array($output,'output'),$this,$data);
		}
	}

}
